# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ grachia.ru

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

- **IP:** 89.232.184.218
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** racho
- **–î–æ–º–µ–Ω:** grachia.ru (—Å SSL)
- **–ê—Ä—Ö–∏–≤:** chronometry.tar.gz (5.9 MB)

---

## üìã –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–∞ –≤–∞—à–µ–º Mac –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd "/Users/grachyaalexanyan/Downloads/–ò–≥—Ä–∞"

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—Ä—Ö–∏–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp chronometry.tar.gz racho@89.232.184.218:~/

# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: cv7AE5HpRC
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§–∞–π–ª `chronometry.tar.gz` –∑–∞–≥—Ä—É–∂–µ–Ω –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìã –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh racho@89.232.184.218
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: cv7AE5HpRC
```

–¢–µ–ø–µ—Ä—å –≤—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

---

## üìã –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Node.js:

```bash
node --version
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 20:

```bash
# –î–ª—è Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –î–ª—è CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo yum install -y nodejs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
node --version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v20.x.x
npm --version   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 10.x.x
```

---

## üìã –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2

PM2 - –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```bash
sudo npm install -g pm2

# –ü—Ä–æ–≤–µ—Ä–∫–∞
pm2 --version
```

---

## üìã –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo mkdir -p /var/www/chronometry
sudo chown $USER:$USER /var/www/chronometry

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /var/www/chronometry

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞
tar -xzf ~/chronometry.tar.gz

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
ls -la
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `public/`, `src/`, `package.json`, `server.js`, `.env`

---

## üìã –®–∞–≥ 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /var/www/chronometry

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
npm install

# –≠—Ç–æ –∑–∞–π–º–µ—Ç 2-3 –º–∏–Ω—É—Ç—ã
```

---

## üìã –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
cd /var/www/chronometry

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
mkdir -p data
mkdir -p photos

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la
```

---

## üìã –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

### A. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–∞—à–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Let's Encrypt
ls -la /etc/letsencrypt/live/grachia.ru/

# –ò–õ–ò –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä—É–≥–∏–µ –ª–æ–∫–∞—Ü–∏–∏
sudo find /etc/ssl -name "*grachia*"
```

### B. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx:

```bash
sudo nano /etc/nginx/sites-available/chronometry
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+Shift+V –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏):

```nginx
server {
    listen 80;
    server_name grachia.ru www.grachia.ru;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name grachia.ru www.grachia.ru;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã - –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –ü–†–ê–í–ò–õ–¨–ù–´–ï –ü–£–¢–ò!
    # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Let's Encrypt:
    ssl_certificate /etc/letsencrypt/live/grachia.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/grachia.ru/privkey.pem;

    # –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏:
    # ssl_certificate /etc/ssl/certs/grachia.ru.crt;
    # ssl_certificate_key /etc/ssl/private/grachia.ru.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # –ö–æ—Ä–Ω–µ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ Node.js
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–ª—è —Ñ–æ—Ç–æ)
    client_max_body_size 10M;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/chronometry_access.log;
    error_log /var/log/nginx/chronometry_error.log;
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª: `Ctrl+O`, `Enter`, `Ctrl+X`

### C. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
sudo ln -sf /etc/nginx/sites-available/chronometry /etc/nginx/sites-enabled/

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo rm -f /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ï—Å–ª–∏ –≤—Å–µ OK, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx
sudo systemctl reload nginx
```

---

## üìã –®–∞–≥ 9: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ —Å HTTPS URL

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –±–æ—Ç–∞:

```bash
nano /var/www/chronometry/src/bot.js
```

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 59-63 –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–æ–ø–∫—É Web App:

```javascript
// –ë—ã–ª–æ:
// keyboard.inline_keyboard.push([{
//   text: 'üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Ñ—Ñ–ª–∞–π–Ω)',
//   web_app: { url: 'https://–í–ê–®_–î–û–ú–ï–ù/telegram-app.html' }
// }]);

// –î–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å:
keyboard.inline_keyboard.push([{
  text: 'üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Ñ—Ñ–ª–∞–π–Ω)',
  web_app: { url: 'https://grachia.ru/telegram-app.html' }
}]);
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

---

## üìã –®–∞–≥ 10: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```bash
cd /var/www/chronometry

# –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞
pm2 start src/bot.js --name "chronometry-bot"

# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
pm2 start server.js --name "chronometry-web"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ "online":

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name               ‚îÇ status  ‚îÇ cpu     ‚îÇ memory   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ chronometry-bot    ‚îÇ online  ‚îÇ 0%      ‚îÇ 50 MB    ‚îÇ
‚îÇ 1   ‚îÇ chronometry-web    ‚îÇ online  ‚îÇ 0%      ‚îÇ 40 MB    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã –®–∞–≥ 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

```bash
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
pm2 save

# –°–æ–∑–¥–∞–Ω–∏–µ startup —Å–∫—Ä–∏–ø—Ç–∞
pm2 startup

# PM2 –≤—ã–≤–µ–¥–µ—Ç –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å sudo
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
[PM2] To setup the Startup Script, copy/paste the following command:
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u racho --hp /home/racho
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É.

---

## üìã –®–∞–≥ 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### A. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
pm2 logs chronometry-bot --lines 20

# –õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
pm2 logs chronometry-web --lines 20

# –î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ª–æ–≥–æ–≤ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
```

### B. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞:

```bash
curl http://localhost:5000
```

–î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

### C. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ: https://grachia.ru

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!

---

## üìã –®–∞–≥ 13: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram Web App

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ `/start` –∏–ª–∏ `/menu`
4. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∫–Ω–æ–ø–∫—É **"üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Ñ—Ñ–ª–∞–π–Ω)"**
5. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë
6. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram! üéâ

### –¢–µ—Å—Ç –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É
3. **–í–∫–ª—é—á–∏—Ç–µ –∞–≤–∏–∞—Ä–µ–∂–∏–º** –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚úàÔ∏è
4. –ó–∞–∫—Ä–æ–π—Ç–µ –∏ —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
6. –í—ã–∫–ª—é—á–∏—Ç–µ –∞–≤–∏–∞—Ä–µ–∂–∏–º
7. –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è üéâ

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PM2

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs chronometry-bot
pm2 logs chronometry-web
pm2 logs  # –≤—Å–µ –ª–æ–≥–∏

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart chronometry-bot
pm2 restart chronometry-web
pm2 restart all

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop chronometry-bot
pm2 stop all

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
pm2 delete chronometry-bot

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 monit
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:

### –ù–∞ –≤–∞—à–µ–º Mac:

```bash
cd "/Users/grachyaalexanyan/Downloads/–ò–≥—Ä–∞"

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞—Ä—Ö–∏–≤
tar -czf chronometry.tar.gz --exclude='node_modules' --exclude='.git' --exclude='bot.log' --exclude='*.tar.gz' --exclude='*.md' public/ src/ package.json server.js

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp chronometry.tar.gz racho@89.232.184.218:~/
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ssh racho@89.232.184.218

cd /var/www/chronometry

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
pm2 stop all

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
cp -r /var/www/chronometry /var/www/chronometry.backup

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
tar -xzf ~/chronometry.tar.gz

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
npm install

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart all

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs --lines 20
```

---

## ‚ùå –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
pm2 logs chronometry-bot --lines 50
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª–µ.

### –ü—Ä–æ–±–ª–µ–º–∞: –í–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
pm2 logs chronometry-web --lines 50

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ä—Ç 5000
sudo netstat -tlnp | grep 5000

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
sudo nginx -t
sudo systemctl status nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart chronometry-web

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs chronometry-web
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL –æ—à–∏–±–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx:

```bash
sudo nano /etc/nginx/sites-available/chronometry

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
ls -la /etc/letsencrypt/live/grachia.ru/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∞ Web App –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:
```bash
pm2 restart chronometry-bot
pm2 logs chronometry-bot
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`:
```bash
grep "web_app" /var/www/chronometry/src/bot.js
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] –ê—Ä—Ö–∏–≤ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (v20+)
- [ ] PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ö–æ–¥ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω –≤ `/var/www/chronometry`
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)
- [ ] –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `data/` –∏ `photos/` —Å–æ–∑–¥–∞–Ω—ã
- [ ] Nginx —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] `bot.js` –æ–±–Ω–æ–≤–ª–µ–Ω —Å HTTPS URL
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã —á–µ—Ä–µ–∑ PM2
- [ ] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`pm2 startup`)
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è: https://grachia.ru
- [ ] –ö–Ω–æ–ø–∫–∞ Web App –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –±–æ—Ç–µ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram
- [ ] –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç —Å –∞–≤–∏–∞—Ä–µ–∂–∏–º–æ–º)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ **https://grachia.ru**

- üåê PWA –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: https://grachia.ru
- üì± Telegram Web App —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- üíæ –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ü§ñ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ PM2

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs`

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 25 –Ω–æ—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 1.0
